(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ChatBanned"],{"651d":function(e,t,o){"use strict";o.r(t);o("99af"),o("fb6a");var n=o("7a23"),r=function(e){return Object(n["pushScopeId"])("data-v-4dfad7ed"),e=e(),Object(n["popScopeId"])(),e},c={class:"chatBanned-container"},a={style:{position:"relative"}},i={key:2,class:"icon-svg icon-renzheng",style:{"margin-left":"0.1rem"},"aria-hidden":"true"},l=r((function(){return Object(n["createElementVNode"])("use",{"xlink:href":"#icon-renzheng"},null,-1)})),s=[l],d={class:"chat-item-title-container"},u={class:"chat-item-title van-ellipsis"},b={key:0,style:{color:"#3f80f7"}},m={key:1},h={class:"chat-item-status"},f={key:0,class:"status"},p={key:1,class:"status"};function g(e,t,o,r,l,g){var j=Object(n["resolveComponent"])("van-nav-bar"),O=Object(n["resolveComponent"])("van-cell"),v=Object(n["resolveComponent"])("van-image"),k=Object(n["resolveComponent"])("van-button"),y=Object(n["resolveComponent"])("van-swipe-cell"),$=Object(n["resolveComponent"])("van-empty"),C=Object(n["resolveComponent"])("van-list"),B=Object(n["resolveComponent"])("van-cell-group");return Object(n["openBlock"])(),Object(n["createElementBlock"])("section",c,[Object(n["createVNode"])(j,{"left-text":"","left-arrow":"",onClickLeft:t[0]||(t[0]=function(t){return e.$f.goBack()}),fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2",title:e.$t("banList")},null,8,["title"]),Object(n["createVNode"])(B,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{class:"cell-title-2",title:"".concat(e.$t("members1"),"(").concat(g.total,")")},null,8,["title"]),Object(n["createVNode"])(C,{loading:l.loading,"onUpdate:loading":t[1]||(t[1]=function(e){return l.loading=e}),finished:l.finished,error:l.error,"onUpdate:error":t[2]||(t[2]=function(e){return l.error=e}),offset:"200","error-text":e.$t("errorText"),onLoad:g.getChatGroupMember,"loading-text":e.$t("loading"),"finished-text":""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.groupMember,(function(t,o){return Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:o,class:"group-item",disabled:0===g.role||g.role<=t.role||g.role<=t.user_role},{right:Object(n["withCtx"])((function(){return[1===t.status||2===t.status?(Object(n["openBlock"])(),Object(n["createBlock"])(k,{key:0,square:"",type:"success",text:e.$t("unban2"),onClick:function(e){return g.handleUnMute(t)},style:{height:"100%",width:"1.3rem"}},null,8,["text","onClick"])):Object(n["createCommentVNode"])("",!0)]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{class:"cell-title-lh-1",center:"",label:""},{icon:Object(n["withCtx"])((function(){var o,r,c,l;return[Object(n["createElementVNode"])("div",a,[t.image?(Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:0,class:"chat-avatar",round:"",width:"0.72rem",height:"0.72rem","icon-size":"0.72rem","lazy-load":"","show-loading":"",src:t.image},null,8,["src"])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:1,class:"chat-avatar",style:Object(n["normalizeStyle"])({backgroundColor:"#"+t.user_address.slice(-6),color:e.$f.formatAvatarColor(null===(o=t.user_address)||void 0===o||null===(r=o.slice)||void 0===r?void 0:r.call(o,-4))})},Object(n["toDisplayString"])(null===t||void 0===t||null===(c=t.user_address)||void 0===c||null===(l=c.slice)||void 0===l?void 0:l.call(c,-2)),5)),2===t.role?(Object(n["openBlock"])(),Object(n["createElementBlock"])("svg",i,s)):Object(n["createCommentVNode"])("",!0)])]})),title:Object(n["withCtx"])((function(){var o,r;return[Object(n["createElementVNode"])("div",d,[g.formatRole(t)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"role-tag",style:Object(n["normalizeStyle"])({backgroundColor:g.formatRole(t,"color")})},Object(n["toDisplayString"])(g.formatRole(t)),5)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",u,Object(n["toDisplayString"])((null===t||void 0===t?void 0:t.nickname)||(null===(o=(r=e.$f).formatAddress)||void 0===o?void 0:o.call(r,t.user_address,4))||""),1)])]})),label:Object(n["withCtx"])((function(){return[1===t.is_online?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",b,Object(n["toDisplayString"])(e.$t("online")),1)):0===t.is_online?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",m,Object(n["toDisplayString"])(e.$t("offline")),1)):Object(n["createCommentVNode"])("",!0)]})),default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$t("joined"))+" "+Object(n["toDisplayString"])(e.$dayjs(1e3*t.created_time).fromNow(!0)),1),1===t.status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",f,Object(n["toDisplayString"])(e.$t("bannedUntil"))+" "+Object(n["toDisplayString"])(e.$f.formatDate(t.banned_expired_time)),1)):2===t.status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",p,Object(n["toDisplayString"])(e.$t("permanentlyBanned")),1)):Object(n["createCommentVNode"])("",!0)])]})),_:2},1024)]})),_:2},1032,["disabled"])})),128)),Object(n["withDirectives"])(Object(n["createVNode"])($,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],l.groupMember&&0===l.groupMember.length&&!l.loading]])]})),_:1},8,["loading","finished","error","error-text","onLoad","loading-text"])]})),_:1})])}o("d3b7");var j=o("365c"),O={name:"ChatBanned",data:function(){return{groupMember:[],pageNo:0,pageSize:20,loading:!1,finished:!1,error:!1}},computed:{total:function(){var e;return(null===(e=this.groupMember)||void 0===e?void 0:e.length)||0},role:function(){if(""===this.$store.state.chat.groupMemberInfo.role||""===this.$store.state.chat.groupMemberInfo.user_role)return"";var e=2===this.$store.state.chat.groupMemberInfo.role?1.5:this.$store.state.chat.groupMemberInfo.role,t=Math.max(e,this.$store.state.chat.groupMemberInfo.user_role);return t},groupId:function(){return this.$store.state.chat.groupId}},watch:{"$store.state.chat.chatToken":function(e){e&&this.init()}},activated:function(){this.init()},methods:{init:function(){this.resetLoad()},getChatGroupMember:function(){var e=this;this.loading=!0,Object(j["Q"])(this.groupId,this.pageNo,this.pageSize,"1,2").then((function(t){e.finished=t.length<e.pageSize,e.groupMember=e.groupMember.concat(t),e.pageNo++})).catch((function(){e.error=!0})).finally((function(){setTimeout((function(){e.loading=!1}),1e3)}))},resetLoad:function(){this.pageNo=0,this.groupMember=[],this.loading=!1,this.finished=!1,this.error=!1},handleUnMute:function(e){var t=this;this.$dialog.confirm({message:this.$t("banLifted"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then((function(){t.$toast.loading({forbidClick:!0,duration:0}),Object(j["Rc"])(t.groupId,e.user_address,e.user_chain,0).then((function(e){e&&(t.$toast.success(t.$t("unbanSuccessfully")),t.init())})).catch((function(e){console.log(e),t.$toast.fail(e)})).finally((function(){}))})).catch((function(){}))},formatRole:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",o=2===e.role?1.5:e.role,n=Math.max(o,e.user_role),r={0:{name:"",role:0,color:"#1FD0A3"},1:{name:this.$t("admin"),role:1,color:"#1FD0A3"},1.5:{name:this.$t("projectParty"),role:1.5,color:"#3F80F7"},2:{name:this.$t("inspector"),role:2,color:"#FFC800"},3:{name:this.$t("superAdmin"),role:3,color:"#1FD0A3"}};return r[n][t]}}},v=(o("f2349"),o("6b0d")),k=o.n(v);const y=k()(O,[["render",g],["__scopeId","data-v-4dfad7ed"]]);t["default"]=y},b353:function(e,t,o){},f2349:function(e,t,o){"use strict";o("b353")}}]);