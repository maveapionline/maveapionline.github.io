(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["UserInfo"],{"1a68":function(e,t,o){"use strict";o.r(t);var n=o("7a23"),i={class:"chatPerson-container"},c={class:"popup-title"};function a(e,t,o,a,l,r){var s=Object(n["resolveComponent"])("van-nav-bar"),u=Object(n["resolveComponent"])("van-image"),d=Object(n["resolveComponent"])("van-cell"),p=Object(n["resolveComponent"])("van-cell-group"),f=Object(n["resolveComponent"])("h5-cropper"),m=Object(n["resolveComponent"])("van-field"),h=Object(n["resolveComponent"])("van-button"),b=Object(n["resolveComponent"])("van-form"),g=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createElementBlock"])("section",i,[Object(n["createVNode"])(s,{"left-text":"","left-arrow":"",onClickLeft:t[0]||(t[0]=function(t){return e.$f.goBack()}),fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2",title:e.$t("personalInformation")},null,8,["title"]),Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])((function(){var t,o;return[Object(n["createVNode"])(d,{title:e.$t("avatar"),"is-link":"",center:"",onClick:Object(n["withModifiers"])(r.handleUpload,["stop"]),size:"large"},{default:Object(n["withCtx"])((function(){return[e.$store.state.chat.userInfo.image?(Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:0,round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:e.$store.state.chat.userInfo.image},null,8,["src"])):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["title","onClick"]),Object(n["createVNode"])(d,{title:e.$t("nickname"),"is-link":"",center:"",value:e.$store.state.chat.userInfo.nickname,onClick:Object(n["withModifiers"])(r.handleEditNickname,["stop"]),size:"large"},null,8,["title","value","onClick"]),Object(n["createVNode"])(d,{title:e.$t("userAddress"),center:"",value:(null===(t=(o=e.$f).formatAddress)||void 0===t?void 0:t.call(o,e.$store.state.chat.userInfo.address,6))||"",size:"large"},null,8,["title","value"])]})),_:1}),Object(n["createVNode"])(f,{class:"cropper-input-file",ref:"cropper",option:l.option,onGetFile:r.getFile},null,8,["option","onGetFile"]),Object(n["createVNode"])(g,{show:l.dialogVisible,"onUpdate:show":t[2]||(t[2]=function(e){return l.dialogVisible=e}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h3",c,Object(n["toDisplayString"])(e.$t("editNickname")),1),Object(n["createVNode"])(b,{class:"popup-content",onSubmit:r.editNickname},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{class:"b-filed",modelValue:l.form.nickname,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.form.nickname=e}),label:"",placeholder:e.$t("enterNickname"),clearable:"",rules:[{required:!0,message:e.$t("enterNickname")}]},null,8,["modelValue","placeholder","rules"]),Object(n["createVNode"])(h,{class:"form-submit",block:"",round:"","native-type":"submit",type:"primary",loading:l.editNicknameLoading},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm1")),1)]})),_:1},8,["loading"])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])])}o("d3b7");var l=o("25a4"),r=o("365c"),s={name:"UserInfo",components:{H5Cropper:l["a"]},data:function(){return{option:{cancelButtonText:this.$t("cancel"),confirmButtonText:this.$t("confirm"),cancelButtonBackgroundColor:"#fff",confirmButtonBackgroundColor:"#558BED",cancelButtonTextColor:"#323233",confirmButtonTextColor:"#fff",outputSize:.1,high:!1,maxImgSize:500,enlarge:.5},loading:!1,nickname:"xxx",form:{nickname:""},editNicknameLoading:!1,dialogVisible:!1}},computed:{},watch:{"$store.state.chat.chatToken":function(e){e&&this.init()}},created:function(){this.init()},activated:function(){this.init()},methods:{init:function(){this.$store.dispatch("getChatUserInfo")},getFile:function(e){var t=this;if(console.log(e),!this.loading){var o={profile_picture:e},n=this.$toast.loading({forbidClick:!1,duration:0});this.loading=!0,Object(r["Uc"])(o).then((function(e){console.log(e),t.$toast({message:t.$t("success"),position:"top"}),t.$store.dispatch("getChatUserInfo")})).catch((function(e){console.log(e),t.$toast({message:e,position:"top"})})).finally((function(){n.clear(),t.loading=!1}))}},handleUpload:function(){document.querySelector(".cropper-input-file input[type=file]").click()},handleEditNickname:function(){var e,t;this.dialogVisible=!0,this.form.nickname=(null===(e=this.$store.state.chat)||void 0===e||null===(t=e.userInfo)||void 0===t?void 0:t.nickname)||""},editNickname:function(){var e=this;this.$toast.loading({forbidClick:!1,duration:0}),Object(r["Tc"])(this.form.nickname).then((function(t){console.log(t),e.$toast({message:e.$t("success"),position:"top"}),e.$store.dispatch("getChatUserInfo"),e.dialogVisible=!1})).catch((function(t){console.log(t),e.$toast({message:t,position:"top"})})).finally((function(){e.loading=!1}))}}},u=(o("1bc4"),o("6b0d")),d=o.n(u);const p=d()(s,[["render",a],["__scopeId","data-v-fac1e744"]]);t["default"]=p},"1bc4":function(e,t,o){"use strict";o("55d9")},"55d9":function(e,t,o){}}]);