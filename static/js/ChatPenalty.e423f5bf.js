(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ChatPenalty"],{"00ba":function(e,t,o){"use strict";o("7faf")},"4d75":function(e,t,o){"use strict";o.r(t);var n=o("7a23"),a={class:"chatPenalty-container"},r={class:"center-container"},l={class:"form-label"},i={class:"form-label"},c={class:"form-label"},s={class:"submit-bar van-safe-area-bottom van-hairline--top"};function u(e,t,o,u,d,p){var f=this,m=Object(n["resolveComponent"])("van-nav-bar"),b=Object(n["resolveComponent"])("van-field"),h=Object(n["resolveComponent"])("van-uploader"),v=Object(n["resolveComponent"])("van-form"),g=Object(n["resolveComponent"])("van-button"),y=Object(n["resolveComponent"])("van-picker"),O=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("section",a,[Object(n["createVNode"])(m,{"left-text":"","left-arrow":"",onClickLeft:t[0]||(t[0]=function(t){return e.$f.goBack()}),fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2",title:e.$t("penaltyViolation")},null,8,["title"]),Object(n["createElementVNode"])("div",r,[Object(n["createVNode"])(v,{class:"form-container",ref:"form",onSubmit:p.onSubmit},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h3",l,Object(n["toDisplayString"])(e.$t("penaltyType")),1),Object(n["createVNode"])(b,{class:"form-field b-filed","model-value":p.typeResult,clickable:"",readonly:"",name:"typeResult",label:"",placeholder:e.$t("pleaseSelectThePenaltyType"),rules:[{required:!0,message:f.$t("pleaseSelectThePenaltyType")}],"right-icon":"arrow-down",onClick:t[1]||(t[1]=function(e){return d.showPicker=!0})},null,8,["model-value","placeholder","rules"]),Object(n["createElementVNode"])("h3",i,Object(n["toDisplayString"])(e.$t("penaltyBasis")),1),Object(n["createVNode"])(b,{class:"form-field b-filed",modelValue:d.form.descript,"onUpdate:modelValue":t[2]||(t[2]=function(e){return d.form.descript=e}),rows:"5",autosize:"",label:"",name:"descript",type:"textarea",placeholder:e.$t("pleaseEnterThePenaltyBasis"),rules:[{required:!0,message:f.$t("pleaseEnterThePenaltyBasis")}],maxlength:"100","show-word-limit":""},null,8,["modelValue","placeholder","rules"]),Object(n["createElementVNode"])("h3",c,Object(n["toDisplayString"])(e.$t("basedOnScreenshots")),1),Object(n["createVNode"])(b,{name:"profile_picture",label:"",rules:[{required:!0,message:f.$t("pleaseUploadScreenshots")}]},{input:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{modelValue:d.form.profile_picture,"onUpdate:modelValue":t[3]||(t[3]=function(e){return d.form.profile_picture=e}),"result-type":"file","before-read":p.beforeRead,multiple:"","max-count":"3","upload-text":e.$t("upTo3")},null,8,["modelValue","before-read","upload-text"])]})),_:1},8,["rules"])]})),_:1},8,["onSubmit"])]),Object(n["createElementVNode"])("div",s,[Object(n["createVNode"])(g,{block:"",round:"",type:"primary",loading:d.loading,onClick:t[4]||(t[4]=Object(n["withModifiers"])((function(t){return e.$refs.form.submit()}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("submitPenalty")),1)]})),_:1},8,["loading"])])]),Object(n["createVNode"])(O,{show:d.showPicker,"onUpdate:show":t[6]||(t[6]=function(e){return d.showPicker=e}),position:"bottom"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{columns:p.columns,onConfirm:p.onConfirm,onCancel:t[5]||(t[5]=function(e){return d.showPicker=!1})},null,8,["columns","onConfirm"])]})),_:1},8,["show"])],64)}o("d3b7"),o("3ca3"),o("ddb0"),o("d81d");var d=o("365c"),p=o("7c8d"),f=o.n(p),m={name:"ChatPenalty",data:function(){return{form:{type:"",descript:"",profile_picture:void 0},showPicker:!1,types:[0,1],loading:!1}},computed:{typeResult:function(){var e;return(null===(e=this.columns)||void 0===e?void 0:e[this.form.type])||""},columns:function(){return[this.$t("groupBan"),this.$t("groupSlow")]},groupId:function(){return this.$store.state.chat.groupId}},methods:{beforeRead:function(e){var t=this;return Array.isArray(e)?Promise.all(e.map((function(e){return t.compressFile(e)}))):this.compressFile(e)},compressFile:function(e){var t=this;return new Promise((function(o,n){new f.a(e,{quality:.6,checkOrientation:!1,success:function(e){e.size>1048576?(t.$toast({message:t.$t("uploadingImageTooLarge"),position:"top"}),n(!1)):o(e)},error:function(e){console.log(e.message),this.$toast({message:e.message,position:"top"}),n(!1)}})}))},onConfirm:function(e,t){console.log(e),this.form.type=t,this.showPicker=!1},onSubmit:function(e){var t=this;console.log("values",e),console.log("this.form.profile_picture",this.form.profile_picture);var o=this.form.profile_picture.map((function(e){return e.file}));this.loading=!0,Object(d["b"])(this.groupId,o,this.form.descript,this.form.type).then((function(e){console.log(e),e&&(t.$toast.success(t.$t("submitPenaltySuccessfully")),t.$store.dispatch("getChatGroupSettings"),t.$f.goBack())})).catch((function(e){console.log(e),t.$toast.fail(e)})).finally((function(){t.loading=!1}))}}},b=(o("e28a"),o("6b0d")),h=o.n(b);const v=h()(m,[["render",u],["__scopeId","data-v-0d5e3ae3"]]);t["default"]=v},"7faf":function(e,t,o){},"8a6c":function(e,t,o){},dcdd:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),a={class:"chatPenalty-container"},r={class:"center-container"},l={class:"form-container"},i={class:"form-label"},c={class:"form-label"},s={class:"form-label"},u={class:"images"},d={class:"submit-bar van-safe-area-bottom van-hairline--top"};function p(e,t,o,p,f,m){var b=Object(n["resolveComponent"])("van-nav-bar"),h=Object(n["resolveComponent"])("van-field"),v=Object(n["resolveComponent"])("van-image"),g=Object(n["resolveComponent"])("van-button");return Object(n["openBlock"])(),Object(n["createElementBlock"])("section",a,[Object(n["createVNode"])(b,{"left-text":"","left-arrow":"",onClickLeft:t[0]||(t[0]=function(t){return e.$f.goBack()}),fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2",title:e.$t("violationPenaltyDetails")},null,8,["title"]),Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("h3",i,Object(n["toDisplayString"])(e.$t("penaltyType")),1),Object(n["createVNode"])(h,{class:"form-field b-filed","model-value":m.typeResult,readonly:"",name:"typeResult",label:"",placeholder:e.$t("pleaseSelectThePenaltyType"),"right-icon":"arrow-down"},null,8,["model-value","placeholder"]),Object(n["createElementVNode"])("h3",c,Object(n["toDisplayString"])(e.$t("penaltyBasis")),1),Object(n["createVNode"])(h,{class:"form-field b-filed","model-value":f.penaltyInfo.descript,rows:"5",label:"",name:"descript",type:"textarea",readonly:""},null,8,["model-value"]),Object(n["createElementVNode"])("h3",s,Object(n["toDisplayString"])(e.$t("basedOnScreenshots")),1),Object(n["createElementVNode"])("div",u,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(f.penaltyInfo.images,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(v,{class:"image-item",key:t,width:"1.6rem",height:"1.6rem",fit:"contain",src:e,onClick:Object(n["withModifiers"])((function(e){return m.imagePreview(t)}),["stop"])},null,8,["src","onClick"])})),128))])])]),Object(n["createElementVNode"])("div",d,[Object(n["createVNode"])(g,{block:"",round:"",type:"primary",onClick:Object(n["withModifiers"])(m.goToPay,["stop"])},{default:Object(n["withCtx"])((function(){var t;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("burnConfirm",{n:(null===(t=e.$store.state.chat.chatConfig)||void 0===t?void 0:t.ave_chat_usdt_count)||""})),1)]})),_:1},8,["onClick"])])])}var f=o("365c"),m=o("0ae8"),b={name:"ChatPenaltyInfo",data:function(){return{type:"",showPicker:!1,loading:!1,penaltyInfo:{}}},computed:{typeResult:function(){var e,t;return(null===(e=this.columns)||void 0===e?void 0:e[null===(t=this.penaltyInfo)||void 0===t?void 0:t.type])||""},columns:function(){return[this.$t("groupBan"),this.$t("groupSlow")]},groupId:function(){return this.$store.state.chat.groupId}},watch:{"$store.state.chat.chatToken":function(e){e&&this.init()}},created:function(){this.init()},activated:function(){this.init()},methods:{init:function(){this.getChatGroupIllegal()},getChatGroupIllegal:function(){var e=this;Object(f["P"])(this.groupId).then((function(t){var o,n;(e.penaltyInfo=(null===t||void 0===t?void 0:t[0])||{},e.penaltyInfo.images)&&(e.penaltyInfo.images=(null===(o=JSON.parse)||void 0===o?void 0:o.call(JSON,null===(n=e.penaltyInfo)||void 0===n?void 0:n.images))||[]);console.log("this.penaltyInfo",e.penaltyInfo)}))},imagePreview:function(e){Object(m["a"])({images:this.penaltyInfo.images,startPosition:e,closeable:!0})},goToPay:function(){"bsc"!==this.$store.getters.netId&&"oec"!==this.$store.getters.netId||"importAddress"===this.$store.state.wallet||!window.ethereum?this.$router.push({name:"ChatBurn",params:{id:this.groupId,illegalId:this.penaltyInfo.id}}):this.$router.push({name:"ChatNewPayment",params:{type:"burn",id:this.groupId,illegalId:this.penaltyInfo.id}})}}},h=(o("00ba"),o("6b0d")),v=o.n(h);const g=v()(b,[["render",p],["__scopeId","data-v-2c7dd120"]]);t["default"]=g},e28a:function(e,t,o){"use strict";o("8a6c")}}]);