(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ChatIndex"],{"20bb":function(e,t,n){},"4ea1":function(e,t,n){},5332:function(e,t,n){"use strict";n("20bb")},"6f29":function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r=Object(o["createElementVNode"])("div",{id:"grab-dialog"},null,-1);function c(e,t,n,c,a,i){var s=Object(o["resolveComponent"])("router-view"),l=Object(o["resolveComponent"])("Report");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(e){var t=e.Component;return[(Object(o["openBlock"])(),Object(o["createBlock"])(o["KeepAlive"],{exclude:i.keepAliveExclude},[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(t)))],1032,["exclude"]))]})),_:1}),Object(o["createVNode"])(l),r],64)}var a=n("1da1"),i=(n("96cf"),n("99af"),n("caad"),n("2532"),{key:0,class:"reason-input-box"}),s={class:"confirm-box"};function l(e,t,n,r,c,a){var l=this,u=Object(o["resolveComponent"])("van-radio"),d=Object(o["resolveComponent"])("van-cell"),p=Object(o["resolveComponent"])("van-field"),h=Object(o["resolveComponent"])("van-cell-group"),b=Object(o["resolveComponent"])("van-radio-group"),m=Object(o["resolveComponent"])("van-button"),f=Object(o["resolveComponent"])("van-form"),v=Object(o["resolveComponent"])("van-action-sheet");return Object(o["openBlock"])(),Object(o["createBlock"])(v,{show:this.$store.state.chat.reportVisible,"onUpdate:show":t[2]||(t[2]=function(e){return l.$store.state.chat.reportVisible=e}),description:"",title:e.$t("reportContent"),teleport:"#app"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{onSubmit:a.select},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{modelValue:c.checked,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.checked=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{border:!1,style:{"--van-cell-vertical-padding":"0.12rem"}},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.reasons,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:t,title:e.report_content,clickable:"",onClick:function(t){return c.checked=e.id},border:!1},{"right-icon":Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{name:e.id},null,8,["name"])]})),_:2},1032,["title","onClick"])})),128)),8===c.checked?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,[Object(o["createVNode"])(p,{class:"reason-input",modelValue:c.reason,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.reason=e}),label:"",placeholder:e.$t("enterReportContent"),clearable:"",rules:c.rules},null,8,["modelValue","placeholder","rules"])])):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),_:1},8,["modelValue"]),Object(o["createElementVNode"])("div",s,[Object(o["createVNode"])(m,{type:"primary","native-type":"submit",round:"",block:"",style:{height:"0.8rem"}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("confirm1")),1)]})),_:1})])]})),_:1},8,["onSubmit"])]})),_:1},8,["show","title"])}n("d3b7");var u=n("365c"),d={name:"Report",emits:["onSelect"],data:function(){return{checked:1,rules:[{required:!0,message:this.$t("enterReportContent")}],reason:""}},computed:{language:function(){return this.$store.getters.language},reasons:function(){return this.$store.state.chat.reportReasons||[]},id:function(){return this.$store.state.chat.reportMsgId}},watch:{show:function(e){var t;e&&(null===(t=this.reasons)||void 0===t?void 0:t.length)>0&&(this.checked=1,this.reason="")}},methods:{select:function(){var e=this,t={id:this.id,report_content_id:this.checked,remark:8===this.checked?this.reason:""};Object(u["Dc"])(t).finally((function(){e.$toast({message:e.$t("reportFeedback"),position:"middle",className:"report-toast"})})),this.$store.state.chat.reportVisible=!1}}},p=(n("5332"),n("6b0d")),h=n.n(p);const b=h()(d,[["render",l],["__scopeId","data-v-5eabf3c7"]]);var m=b,f=n("4360"),v={name:"ChatIndex",components:{Report:m},computed:{keepAliveExclude:function(){return this.$store.state.KeepAliveExcludeBase.concat(this.$store.state.keepAliveExclude)}},beforeRouteEnter:function(e,t,n){return Object(a["a"])(regeneratorRuntime.mark((function t(){var o,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return f["a"].state.chat.groupId===(null===(o=e.params)||void 0===o?void 0:o.id)&&f["a"].state.chat.groupId.includes(null===(r=e.params)||void 0===r?void 0:r.id)||(f["a"].state.chat.groupId=(null===(c=e.params)||void 0===c?void 0:c.id)||"",f["a"].commit("resetChatInfo")),t.next=3,f["a"].dispatch("getChatGroupSettings");case 3:f["a"].dispatch("getChatInfo"),n();case 5:case"end":return t.stop()}}),t)})))()},watch:{"$route.params.id":function(e){e&&(this.$store.dispatch("getChatInfo"),this.$store.dispatch("getChatGroupSettings"))},"$store.state.ws.isConnected":function(e){e&&this.$store.dispatch("subChatToken")}},mounted:function(){this.$store.dispatch("getChatReportContent")},methods:{}};n("9f82");const j=h()(v,[["render",c]]);t["default"]=j},"9f82":function(e,t,n){"use strict";n("4ea1")}}]);